set number
colorscheme slate
nnoremap <C-n> gt
nnoremap <C-p> gT
nnoremap sj <C-w>j
nnoremap sk <C-w>k
nnoremap sh <C-w>h
nnoremap sl <C-w>l

"------------

" ESCでIMEを確実にOFF
inoremap <ESC> <ESC>:set iminsert=0<CR>

" insertモードから戻るのが遅いので対策
if !has('gui_running')
    set notimeout
    set ttimeout
    set timeoutlen=100
endif

set nocp
filetype plugin indent on

set bg=dark

hi clear
if exists("syntax_on")
syntax reset
endif
"
let colors_name = "darkblue"

set encoding=utf8 "エンコード
set fenc=utf-8 "エンコード
scriptencoding utf8
" if exists('&ambiwidth')
"     set ambiwidth=double    " UTF-8の□や○でカーソル位置がずれないようにする
" endif "
set fileformat=unix
set fileformats=unix,dos,mac
set statusline=%F%m%r%h%w\ [FORMAT=%{&ff}]\ [TYPE=%Y]\ [ASCII=\%03.3b]\ [HEX=\%02.2B]\ [POS=%04l,%04v][%p%%]\ [LEN=%L]
set number         " 行番号を表示する
set cursorline     " カーソル行の背景色を変える
" カレント行にアンダーラインを引く
highlight CursorLine cterm=underline ctermfg=NONE ctermbg=NONE
highlight CursorLine gui=underline ctermfg=NONE ctermbg=NONE

" set nocursorline     " カーソル行の強調表示をしない
" set cursorcolumn   " カーソル位置のカラムの背景色を変える
set laststatus=2   " ステータス行を常に表示
set cmdheight=1    " メッセージ表示欄を1行確保
set tw=0           " 自動改行しない(twは自動改行させる文字数。0だと自動改行しない)
set showmatch      " 対応する括弧を強調表示
set helpheight=999 " ヘルプを画面いっぱいに開く
set list           " 不可視文字を表示
" 不可視文字の表示記号指定
" set listchars=eol:↲,tab:▸\
set listchars=tab:▸_
" set listchars=tab:>\ ,trail:_
" カーソル移動関連の設定

set backspace=indent,eol,start " Backspaceキーの影響範囲に制限を設けない
set whichwrap=b,s,h,l,<,>,[,]  " 行頭行末の左右移動で行をまたぐ
set scrolloff=8                " 上下8行の視界を確保
set sidescrolloff=16           " 左右スクロール時の視界を確保
set sidescroll=1               " 左右スクロールは一文字づつ行う

" ファイル処理関連の設定
set nowrap     " 画面の端で行を折り返さない
set confirm    " 保存されていないファイルがあるときは終了前に保存確認
set hidden     " 保存されていないファイルがあるときでも別のファイルを開くことが出来る
set autoread   "外部でファイルに変更がされた場合は読みなおす
set nobackup   " ファイル保存時にバックアップファイルを作らない
set noswapfile " ファイル編集中にスワップファイルを作らない

" 検索/置換の設定
set hlsearch   " 検索文字列をハイライトする
set incsearch  " インクリメンタルサーチを行う
set ignorecase " 大文字と小文字を区別しない
set smartcase  " 大文字と小文字が混在した言葉で検索を行った場合に限り、大文字と小文字を区別する
set wrapscan   " 最後尾まで検索を終えたら次の検索で先頭に移る
set gdefault   " 置換の時 g オプションをデフォルトで有効にする

set expandtab     " タブ入力を複数の空白入力に置き換える
set tabstop=2     " 画面上でタブ文字が占める幅
set shiftwidth=2  " 自動インデントでずれる幅
set softtabstop=2 " 連続した空白に対してタブキーやバックスペースキーでカーソルが動く幅
set autoindent    " 改行時に前の行のインデントを継続する
set smartindent   " 改行時に入力された行の末尾に合わせて次の行のインデントを増減する

au BufNewFile,BufRead *.php set nowrap tabstop=4 shiftwidth=4
au BufNewFile,BufRead *.html.twig set nowrap tabstop=4 shiftwidth=4
au BufNewFile,BufRead *.ctp set nowrap tabstop=4 shiftwidth=4

" 動作環境との統合関連の設定
" OSのクリップボードをレジスタ指定無しで Yank, Put 出来るようにする
set clipboard=unnamed,unnamedplus
set clipboard+=autoselect
set mouse=a " マウスの入力を受け付ける
set ttymouse=xterm2
set shellslash " Windows でもパスの区切り文字を / にする
" インサートモードから抜けると自動的にIMEをオフにする
" set iminsert=2

" コマンドラインの設定
set wildmenu "コマンドラインモードでファイル名を補完する
set wildmenu wildmode=list:longest,full " コマンドラインモードでTABキーによるファイル名補完を有効にする
set history=10000 " コマンドラインの履歴を10000件保存する
set visualbell t_vb= "ビープ音すべてを無効にする
set noerrorbells "エラーメッセージの表示時にビープを鳴らさない

filetype indent plugin on
syntax on

set showcmd
set syn=php
"set colorscheme torte
set t_Co=256
set t_ut=
set hlsearch
set nomodeline
set ignorecase
set smartcase
set smarttab
set backspace=indent,eol,start
set nostartofline
set ruler "カーソルが何行目の何列目か表示
set visualbell
set notimeout ttimeout ttimeoutlen=200

"set syntax=htmldjango
map Y y$

nnoremap <C-L> :nohl<CR><C-L>
noremap ; :

"autocmd vimenter * NERDTreeTabsOpen

augroup filetypedetect
    au BufRead,BufNewFile *.twig set filetype=htmldjango
augroup END

nnoremap <silent><C-n> :tabn<CR>
nnoremap <silent><C-p> :tabp<CR>
nnoremap [q :cprevious<CR>
nnoremap ]q :cnext<CR>
nnoremap [Q <C-u>cfirst<CR>
nnoremap ]Q <C-u>clast<CR>

" ショートカット
nnoremap s <Nop>
nnoremap sj <C-w>j
nnoremap sk <C-w>k
nnoremap sl <C-w>l
nnoremap sh <C-w>h
nnoremap sJ <C-w>J
nnoremap sK <C-w>K
nnoremap sL <C-w>L
nnoremap sH <C-w>H
nnoremap S <C-w><
nnoremap F <C-w>>
nnoremap C <C-w>+
nnoremap X <C-w>-

nnoremap sT <C-w>T
nnoremap s] <C-w><C-]>
nnoremap <F3> <C-w><C-]><C-w>T


" タブの移動
function! s:MoveTabpage(num)
  if type(a:num) != type(0)
    return
  endif

  let pos = tabpagenr() - 1 + a:num
  let tabcount = tabpagenr("$")

  if pos < 0
    let pos = tabcount - 1
  elseif pos >= tabcount 
    let pos = 0
  endif

  execute "tabmove " . pos
endfunction

" タブ移動：タブページの番号をC-k,C-jで移動させる
command! -nargs=1 TabMove :call <SID>MoveTabpage(<f-args>)

nnoremap <silent><C-k> :call <SID>MoveTabpage(1)<Return><CR>
nnoremap <silent><C-j> :call <SID>MoveTabpage(-1)<Return><CR>

inoremap <silent> jj <ESC>

" F4でインサートモードの切り替えを行う
imap <F4> <nop>
set pastetoggle=<F4>

set foldmethod=marker

if has('mac')
  set termencoding=utf-8
  set encoding=utf-8
  set fileencodings=ucs-bom,iso-2022-jp-3,iso-2022-jp,eucjp-ms,euc-jisx0213,euc-jp,sjis,cp932,utf-8
  " set fileencoding=utf-8
  " set fileencodings=utf-8,cp932
endif

" PHP環境
let php_sql_query = 1
let php_baselib = 1
let php_htmlInStrings = 1
let php_noShortTags = 1
let php_parent_error_close = 1

" mysqlの場合
let g:sql_type_default='mysql'
